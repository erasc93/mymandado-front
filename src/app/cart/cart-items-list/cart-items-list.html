<div style=" display:flex; flex-direction:row; justify-content:space-between; ">
   @if(this.doneonly()){
      <p-button icon="pi pi-eye" (click)="switchViewDoneNotDone()" severity="contrast" />
   } 
   @else{
      <p-button icon="pi pi-eye-slash" (click)="switchViewDoneNotDone()" severity="contrast" />
   }
   <span style="display:flex; flex-direction:row; justify-content:flex-start; align-items:center;"> <p-button (click)="logout()" severity="secondary">logout : {{user()}}</p-button> <h4></h4></span>
   
   <p-button 
   icon="pi pi-plus" 
   (click)="formAddVisible=true" 
   label="Ajouter" 
   severity="info" />
</div>


<mnd-form-add-cart-item 
[(isvisible)]="formAddVisible" 
(submit)="addItemSubmit($event)" />
<mnd-form-add-cart-item 
[(isvisible)]=updateFormVisible 
(submit)=updateItemSubmit($event) 
[item]=updatingItem()/>

@if(!formAddVisible && !updateFormVisible){
   
   <div class=table-container>
      <table>
         <colgroup>
            <col style="width: 10%; ">
            <col style="width: 20%;">
            <col style="width: 55%;">
            <col style="width: 15%;">
         </colgroup>
         <thead>
            <tr>
               <th></th>
               <th></th>
               <th></th>
               <th></th>
            </tr>
         </thead>
         <tbody>
            @for(cartitem of products() ; track cartitem){
               <tr >
                  <td>
                     <p-checkbox  inputId="cart_item"  [ngModel]="cartitem.isdone" (onChange)="toogle($event.checked,cartitem)"  [binary]="true" [disabled]="loading()" />
                     <label for="cart_item">  </label>
                  </td>
                  <td style="text-align:end;">{{cartitem.quantity}}  {{cartitem.product.unit}}</td>
                  <td> {{cartitem.product.name}}  </td>
                  <td> 
                     @if(!doneonly()){
                        <p-button 
                        icon="pi pi-pencil"
                        class="p-button-text"
                        (onClick)="showUpdateForm(cartitem)"
                        /> 
                     } @else{
                        <p-button 
                        icon="pi pi-trash"
                        severity="danger"
                        class="p-button-text"
                        (onClick)="delete(cartitem)"
                        /> 
                     }
                  </td>
               </tr>
            }
         </tbody>
      </table>
      
   </div>
}